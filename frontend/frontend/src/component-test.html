<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Component Testing - Token Factory DApp</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        border: "hsl(214.3 31.8% 91.4%)",
                        input: "hsl(214.3 31.8% 91.4%)",
                        ring: "hsl(221.2 83.2% 53.3%)",
                        background: "hsl(0 0% 100%)",
                        foreground: "hsl(222.2 84% 4.9%)",
                        primary: {
                            DEFAULT: "hsl(221.2 83.2% 53.3%)",
                            foreground: "hsl(210 40% 98%)",
                        },
                        secondary: {
                            DEFAULT: "hsl(210 40% 96%)",
                            foreground: "hsl(222.2 84% 4.9%)",
                        },
                        destructive: {
                            DEFAULT: "hsl(0 84.2% 60.2%)",
                            foreground: "hsl(210 40% 98%)",
                        },
                        muted: {
                            DEFAULT: "hsl(210 40% 96%)",
                            foreground: "hsl(215.4 16.3% 46.9%)",
                        },
                        accent: {
                            DEFAULT: "hsl(210 40% 96%)",
                            foreground: "hsl(222.2 84% 4.9%)",
                        },
                        popover: {
                            DEFAULT: "hsl(0 0% 100%)",
                            foreground: "hsl(222.2 84% 4.9%)",
                        },
                        card: {
                            DEFAULT: "hsl(0 0% 100%)",
                            foreground: "hsl(222.2 84% 4.9%)",
                        },
                    },
                }
            }
        }
    </script>
    
    <style>
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }
        
        /* Focus styles */
        .focus-visible\:outline-none:focus-visible {
            outline: 2px solid transparent;
            outline-offset: 2px;
        }
        
        .focus-visible\:ring-2:focus-visible {
            --tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);
            --tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);
            box-shadow: var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000);
        }
        
        .focus-visible\:ring-ring:focus-visible {
            --tw-ring-color: hsl(221.2 83.2% 53.3%);
        }
        
        .focus-visible\:ring-offset-2:focus-visible {
            --tw-ring-offset-width: 2px;
        }
        
        .focus-visible\:ring-offset-background:focus-visible {
            --tw-ring-offset-color: hsl(0 0% 100%);
        }
    </style>
</head>
<body class="bg-background text-foreground">
    <div id="root" class="min-h-screen p-8">
        <div class="max-w-6xl mx-auto space-y-8">
            <header>
                <h1 class="text-3xl font-bold text-center mb-2">Token Factory Components Test</h1>
                <p class="text-muted-foreground text-center">Testing accessibility and functionality with Playwright MCP</p>
            </header>

            <div id="component-showcase" class="space-y-8"></div>
            
            <div id="test-results" class="mt-8 p-4 border rounded-lg bg-muted/50">
                <h2 class="text-xl font-semibold mb-2">Test Results</h2>
                <div id="test-output" class="text-sm text-muted-foreground">
                    Ready for testing...
                </div>
            </div>
        </div>
    </div>

    <script type="text/babel">
        const { useState, useEffect, useCallback } = React;

        // Mock utilities for testing
        const cn = (...classes) => classes.filter(Boolean).join(' ');
        const formatAddress = (address, chars = 4) => {
            if (!address || address.length < 10) return address;
            return `${address.slice(0, chars + 2)}...${address.slice(-chars)}`;
        };

        // Mock Button Component for testing
        const Button = ({ 
            children, 
            onClick, 
            variant = "default", 
            size = "default",
            disabled = false,
            loading = false,
            leftIcon,
            className = "",
            ...props 
        }) => {
            const baseClasses = "inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50";
            
            const variants = {
                default: "bg-primary text-primary-foreground hover:bg-primary/90",
                destructive: "bg-destructive text-destructive-foreground hover:bg-destructive/90",
                outline: "border border-input bg-background hover:bg-accent hover:text-accent-foreground",
                secondary: "bg-secondary text-secondary-foreground hover:bg-secondary/80",
                ghost: "hover:bg-accent hover:text-accent-foreground",
                link: "text-primary underline-offset-4 hover:underline"
            };

            const sizes = {
                default: "h-10 px-4 py-2",
                sm: "h-9 rounded-md px-3",
                lg: "h-11 rounded-md px-8",
                icon: "h-10 w-10"
            };

            return (
                <button
                    className={cn(baseClasses, variants[variant], sizes[size], className)}
                    onClick={onClick}
                    disabled={disabled || loading}
                    {...props}
                >
                    {loading && <span className="mr-2">⏳</span>}
                    {leftIcon && <span className="mr-2">{leftIcon}</span>}
                    {loading ? "Loading..." : children}
                </button>
            );
        };

        // Mock Input Component for testing
        const Input = ({ 
            label, 
            error, 
            description, 
            className = "",
            id,
            ...props 
        }) => {
            const inputId = id || `input-${Math.random().toString(36).substr(2, 9)}`;

            return (
                <div className="w-full space-y-2">
                    {label && (
                        <label htmlFor={inputId} className="text-sm font-medium leading-none">
                            {label}
                        </label>
                    )}
                    {description && (
                        <p className="text-sm text-muted-foreground">{description}</p>
                    )}
                    <input
                        id={inputId}
                        className={cn(
                            "flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm",
                            "placeholder:text-muted-foreground",
                            "focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",
                            "disabled:cursor-not-allowed disabled:opacity-50",
                            error && "border-destructive focus-visible:border-destructive focus-visible:ring-destructive",
                            className
                        )}
                        {...props}
                    />
                    {error && (
                        <p className="text-sm text-destructive" role="alert">
                            {error}
                        </p>
                    )}
                </div>
            );
        };

        // Mock Card Component for testing
        const Card = ({ children, className = "", ...props }) => (
            <div 
                className={cn("rounded-lg border bg-card text-card-foreground shadow-sm", className)} 
                {...props}
            >
                {children}
            </div>
        );

        const CardHeader = ({ children, className = "", ...props }) => (
            <div className={cn("flex flex-col space-y-1.5 p-6", className)} {...props}>
                {children}
            </div>
        );

        const CardTitle = ({ children, className = "", ...props }) => (
            <h3 className={cn("text-2xl font-semibold leading-none tracking-tight", className)} {...props}>
                {children}
            </h3>
        );

        const CardDescription = ({ children, className = "", ...props }) => (
            <p className={cn("text-sm text-muted-foreground", className)} {...props}>
                {children}
            </p>
        );

        const CardContent = ({ children, className = "", ...props }) => (
            <div className={cn("p-6 pt-0", className)} {...props}>
                {children}
            </div>
        );

        // Test Component Showcase
        const ComponentShowcase = () => {
            const [testResults, setTestResults] = useState([]);

            const logTest = useCallback((component, test, result, details = '') => {
                const timestamp = new Date().toLocaleTimeString();
                setTestResults(prev => [...prev, { timestamp, component, test, result, details }]);
            }, []);

            useEffect(() => {
                // Log component load
                logTest('System', 'Component Showcase Load', 'PASS', 'All components loaded successfully');
            }, [logTest]);

            return (
                <div className="space-y-8">
                    {/* Button Tests */}
                    <section>
                        <h2 className="text-2xl font-semibold mb-4">Button Component Tests</h2>
                        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                            <Button 
                                data-testid="button-default"
                                onClick={() => logTest('Button', 'Default Click', 'PASS', 'Default button clicked')}
                            >
                                Default Button
                            </Button>
                            <Button 
                                variant="outline"
                                data-testid="button-outline"
                                onClick={() => logTest('Button', 'Outline Click', 'PASS', 'Outline button clicked')}
                            >
                                Outline Button
                            </Button>
                            <Button 
                                variant="destructive"
                                data-testid="button-destructive"
                                onClick={() => logTest('Button', 'Destructive Click', 'PASS', 'Destructive button clicked')}
                            >
                                Destructive Button
                            </Button>
                            <Button 
                                size="sm"
                                data-testid="button-small"
                                onClick={() => logTest('Button', 'Small Size Click', 'PASS', 'Small button clicked')}
                            >
                                Small Button
                            </Button>
                            <Button 
                                size="lg"
                                data-testid="button-large"
                                onClick={() => logTest('Button', 'Large Size Click', 'PASS', 'Large button clicked')}
                            >
                                Large Button
                            </Button>
                            <Button 
                                disabled
                                data-testid="button-disabled"
                                onClick={() => logTest('Button', 'Disabled Click', 'FAIL', 'Disabled button should not be clickable')}
                            >
                                Disabled Button
                            </Button>
                        </div>
                    </section>

                    {/* Input Tests */}
                    <section>
                        <h2 className="text-2xl font-semibold mb-4">Input Component Tests</h2>
                        <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <Input 
                                label="Token Name"
                                placeholder="Enter token name"
                                data-testid="input-basic"
                                onChange={(e) => logTest('Input', 'Basic Input Change', 'PASS', `Value: ${e.target.value}`)}
                            />
                            <Input 
                                label="Token Symbol"
                                description="3-5 characters recommended"
                                placeholder="e.g., BTC"
                                data-testid="input-with-description"
                                onChange={(e) => logTest('Input', 'Input with Description Change', 'PASS', `Value: ${e.target.value}`)}
                            />
                            <Input 
                                label="Supply Amount"
                                error="Invalid number format"
                                data-testid="input-with-error"
                                onChange={(e) => logTest('Input', 'Input with Error Change', 'PASS', `Error state maintained with value: ${e.target.value}`)}
                            />
                            <Input 
                                label="Disabled Field"
                                disabled
                                placeholder="This field is disabled"
                                data-testid="input-disabled"
                                onChange={() => logTest('Input', 'Disabled Input Change', 'FAIL', 'Disabled input should not be changeable')}
                            />
                        </div>
                    </section>

                    {/* Card Tests */}
                    <section>
                        <h2 className="text-2xl font-semibold mb-4">Card Component Tests</h2>
                        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                            <Card data-testid="card-basic">
                                <CardHeader>
                                    <CardTitle>Basic Card</CardTitle>
                                    <CardDescription>Simple card with header and content</CardDescription>
                                </CardHeader>
                                <CardContent>
                                    <p className="text-sm">This is a basic card component for testing.</p>
                                    <Button 
                                        className="mt-4" 
                                        size="sm"
                                        onClick={() => logTest('Card', 'Card Button Click', 'PASS', 'Button inside card works')}
                                    >
                                        Action
                                    </Button>
                                </CardContent>
                            </Card>

                            <Card data-testid="card-network" className="border-2 border-blue-200">
                                <CardHeader>
                                    <CardTitle className="flex items-center space-x-2">
                                        <div className="w-4 h-4 rounded-full bg-blue-500"></div>
                                        <span>Ethereum Network</span>
                                    </CardTitle>
                                    <CardDescription>Network card with visual indicator</CardDescription>
                                </CardHeader>
                                <CardContent>
                                    <div className="space-y-2 text-sm">
                                        <div className="flex justify-between">
                                            <span>Status:</span>
                                            <span className="text-green-600">Connected</span>
                                        </div>
                                        <div className="flex justify-between">
                                            <span>Block Time:</span>
                                            <span>~12s</span>
                                        </div>
                                    </div>
                                </CardContent>
                            </Card>

                            <Card data-testid="card-wallet" className="border-green-200">
                                <CardHeader>
                                    <CardTitle>Wallet Status</CardTitle>
                                    <CardDescription>Mock wallet connection</CardDescription>
                                </CardHeader>
                                <CardContent>
                                    <div className="space-y-3">
                                        <div className="flex items-center space-x-2">
                                            <div className="w-3 h-3 rounded-full bg-green-500"></div>
                                            <span className="text-sm">Connected</span>
                                        </div>
                                        <code className="text-xs bg-muted rounded px-2 py-1 block">
                                            {formatAddress('0x1234567890123456789012345678901234567890')}
                                        </code>
                                        <Button 
                                            variant="outline" 
                                            size="sm" 
                                            className="w-full"
                                            onClick={() => logTest('Card', 'Wallet Disconnect', 'PASS', 'Wallet disconnect button works')}
                                        >
                                            Disconnect
                                        </Button>
                                    </div>
                                </CardContent>
                            </Card>
                        </div>
                    </section>

                    {/* Accessibility Tests Section */}
                    <section>
                        <h2 className="text-2xl font-semibold mb-4">Accessibility Tests</h2>
                        <Card data-testid="accessibility-info">
                            <CardHeader>
                                <CardTitle>Accessibility Features</CardTitle>
                                <CardDescription>Testing WCAG 2.1 AA compliance</CardDescription>
                            </CardHeader>
                            <CardContent>
                                <div className="space-y-4">
                                    <div className="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
                                        <div>
                                            <h4 className="font-medium mb-2">Keyboard Navigation</h4>
                                            <ul className="space-y-1 text-muted-foreground">
                                                <li>• Tab through all interactive elements</li>
                                                <li>• Focus indicators visible</li>
                                                <li>• Skip links where appropriate</li>
                                            </ul>
                                        </div>
                                        <div>
                                            <h4 className="font-medium mb-2">Screen Reader Support</h4>
                                            <ul className="space-y-1 text-muted-foreground">
                                                <li>• ARIA labels on all inputs</li>
                                                <li>• Error messages announced</li>
                                                <li>• Status updates communicated</li>
                                            </ul>
                                        </div>
                                        <div>
                                            <h4 className="font-medium mb-2">Visual Design</h4>
                                            <ul className="space-y-1 text-muted-foreground">
                                                <li>• High contrast colors</li>
                                                <li>• Minimum text sizes</li>
                                                <li>• Touch target sizes</li>
                                            </ul>
                                        </div>
                                        <div>
                                            <h4 className="font-medium mb-2">Form Validation</h4>
                                            <ul className="space-y-1 text-muted-foreground">
                                                <li>• Error states clearly marked</li>
                                                <li>• Required fields indicated</li>
                                                <li>• Helpful error messages</li>
                                            </ul>
                                        </div>
                                    </div>
                                    <Button 
                                        onClick={() => {
                                            logTest('Accessibility', 'Manual Test Trigger', 'PASS', 'Accessibility features manually verified');
                                            // Run basic accessibility checks
                                            const buttons = document.querySelectorAll('button');
                                            const inputs = document.querySelectorAll('input');
                                            logTest('Accessibility', 'Interactive Elements Count', 'INFO', `Found ${buttons.length} buttons and ${inputs.length} inputs`);
                                            
                                            // Check for ARIA labels
                                            let ariaCount = 0;
                                            document.querySelectorAll('[aria-label], [aria-labelledby], [aria-describedby]').forEach(() => ariaCount++);
                                            logTest('Accessibility', 'ARIA Attributes', 'INFO', `Found ${ariaCount} elements with ARIA attributes`);
                                        }}
                                        className="w-full"
                                    >
                                        Run Accessibility Check
                                    </Button>
                                </div>
                            </CardContent>
                        </Card>
                    </section>

                    {/* Test Results Display */}
                    <section>
                        <h2 className="text-2xl font-semibold mb-4">Test Results Log</h2>
                        <Card data-testid="test-results">
                            <CardContent className="p-4">
                                {testResults.length === 0 ? (
                                    <p className="text-muted-foreground">No tests run yet. Interact with components above to see results.</p>
                                ) : (
                                    <div className="space-y-2 max-h-64 overflow-y-auto">
                                        {testResults.map((result, index) => (
                                            <div key={index} className="flex items-start space-x-3 text-xs border-b pb-2">
                                                <span className="text-muted-foreground font-mono">{result.timestamp}</span>
                                                <span className="font-medium">{result.component}</span>
                                                <span className="flex-1">{result.test}</span>
                                                <span className={cn(
                                                    "px-2 py-0.5 rounded font-medium",
                                                    result.result === 'PASS' && "bg-green-100 text-green-800",
                                                    result.result === 'FAIL' && "bg-red-100 text-red-800",
                                                    result.result === 'INFO' && "bg-blue-100 text-blue-800"
                                                )}>
                                                    {result.result}
                                                </span>
                                            </div>
                                        ))}
                                    </div>
                                )}
                                <div className="mt-4 pt-4 border-t">
                                    <Button 
                                        variant="outline" 
                                        size="sm"
                                        onClick={() => setTestResults([])}
                                    >
                                        Clear Results
                                    </Button>
                                </div>
                            </CardContent>
                        </Card>
                    </section>
                </div>
            );
        };

        // Render the app
        ReactDOM.render(<ComponentShowcase />, document.getElementById('component-showcase'));
    </script>
</body>
</html>